<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>駿佾老師的科學模擬 Happy Land</title>
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #0f172a; /* Fallback */
            /* 深邃太空背景 */
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(79, 70, 229, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(16, 185, 129, 0.15) 0%, transparent 25%),
                linear-gradient(to bottom right, #020617, #0f172a, #1e1b4b);
            background-attachment: fixed;
        }

        /* 隱藏捲軸但保留功能 */
        ::-webkit-scrollbar {
            width: 8px;
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.4);
        }

        /* 玻璃擬態卡片基礎樣式 */
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Iframe 全螢幕動畫 */
        .game-view-enter {
            animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="text-slate-200 antialiased min-h-screen selection:bg-indigo-500 selection:text-white">

    <!-- =======================
         VIEW 1: 首頁大廳 (Lobby)
         ======================= -->
    <div id="home-view" class="relative min-h-screen flex flex-col pb-12 transition-opacity duration-500">
        
        <!-- 背景裝飾光點 -->
        <div class="fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0">
            <div class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-indigo-600/20 rounded-full blur-[120px]"></div>
            <div class="absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-600/20 rounded-full blur-[120px]"></div>
        </div>

        <!-- Hero Section -->
        <header class="relative z-10 pt-20 pb-12 px-6 text-center max-w-5xl mx-auto fade-in">
            <div class="inline-flex items-center justify-center p-2 mb-6 rounded-full bg-indigo-500/10 border border-indigo-500/20 backdrop-blur-sm">
                <span class="px-3 py-1 text-xs font-bold tracking-widest text-indigo-300 uppercase">Science Simulator Portal</span>
            </div>
            <h1 class="text-4xl md:text-6xl font-black tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-white via-blue-100 to-indigo-200 mb-6 drop-shadow-[0_0_15px_rgba(255,255,255,0.3)]">
                駿佾老師的科學模擬 <br class="md:hidden" />Happy Land
            </h1>
            <p class="text-lg md:text-xl text-slate-400 max-w-2xl mx-auto leading-relaxed">
                
                選擇下方的一個主題，開啟你的探索之旅。
            </p>
        </header>

        <!-- Main Grid Content -->
        <main class="relative z-10 flex-1 px-4 md:px-8 max-w-[1400px] mx-auto w-full">
            <div id="card-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8">
                <!-- Javascript will inject cards here -->
            </div>
        </main>

        <!-- Footer -->
        <footer class="relative z-10 mt-12 text-center text-slate-600 text-sm py-8">
            <p>&copy; 2024 駿佾老師科學教室 | Designed with AI Power</p>
        </footer>
    </div>

    <!-- =======================
         VIEW 2: 遊戲視圖 (Game View)
         ======================= -->
    <div id="game-view" class="fixed inset-0 z-50 bg-[#0f172a] hidden flex-col">
        <!-- 頂部控制列 (懸浮) -->
        <div class="absolute top-0 left-0 right-0 h-16 z-50 flex items-center px-4 md:px-6 bg-gradient-to-b from-black/80 to-transparent pointer-events-none">
            <button onclick="closeGame()" class="pointer-events-auto group flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 hover:scale-105 backdrop-blur-md border border-white/10 rounded-full text-white text-sm font-medium transition-all duration-300 shadow-lg">
                <i data-lucide="arrow-left" class="w-4 h-4 group-hover:-translate-x-1 transition-transform"></i>
                <span>返回大廳</span>
            </button>
            <span id="game-title-display" class="ml-4 text-white/80 font-medium text-sm md:text-base opacity-0 md:opacity-100 transition-opacity">
                <!-- JS 填入當前遊戲名稱 -->
            </span>
        </div>

        <!-- Iframe 容器 -->
        <div class="w-full h-full bg-black relative">
            <!-- Loading Indicator -->
            <div id="loader" class="absolute inset-0 flex flex-col items-center justify-center text-slate-500 bg-[#0f172a]">
                <div class="w-12 h-12 border-4 border-indigo-500/30 border-t-indigo-500 rounded-full animate-spin mb-4"></div>
                <p class="text-sm tracking-wider animate-pulse">正在載入模擬實驗...</p>
            </div>
            
            <iframe id="simulation-frame" class="w-full h-full opacity-0 transition-opacity duration-700" frameborder="0" allowfullscreen allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>
        </div>
    </div>

    <script>
        // ==========================================
        //  資料區
        // ==========================================
        const simulations = [
            {
                id: 1,
                title: "電流物流模擬系統",
                desc: "由物流類比電功率的概念，視覺化理解看不見的電流。",
                icon: "truck",
                color: "text-blue-400",
                glow: "shadow-blue-500/40",
                borderHover: "hover:border-blue-400/50",
                url: "https://augustin0106.github.io/mysite/circuitsimulator.html"
            },
            {
                id: 2,
                title: "人生攻略",
                desc: "駿佾老師做的網站，由模擬遊戲體驗人生抉擇。",
                icon: "gamepad-2",
                color: "text-emerald-400",
                glow: "shadow-emerald-500/40",
                borderHover: "hover:border-emerald-400/50",
                url: "https://csjh163.wixsite.com/my-site"
            },
            {
                id: 3,
                title: "元素大師",
                desc: "考驗你的元素中文與代號對應、週期表排序！",
                icon: "atom",
                color: "text-cyan-400",
                glow: "shadow-cyan-500/40",
                borderHover: "hover:border-cyan-400/50",
                url: "https://augustin0106.github.io/mysite/element"
            },
            {
                id: 4,
                title: "離子與化合物大師",
                desc: "挑戰離子價數表與組合電中性化合物！",
                icon: "flask-conical",
                color: "text-purple-400",
                glow: "shadow-purple-500/40",
                borderHover: "hover:border-purple-400/50",
                url: "https://augustin0106.github.io/mysite/ionandcompound"
            },
            {
                id: 5,
                title: "石墨導電原理",
                desc: "為什麼石墨會導電而鑽石不會？從結構看性質。",
                icon: "zap",
                color: "text-yellow-400",
                glow: "shadow-yellow-500/40",
                borderHover: "hover:border-yellow-400/50",
                url: "https://augustin0106.github.io/mysite/carbon"
            },
            {
                id: 6,
                title: "地震搖晃方向分析",
                desc: "114年第二次模模考題目進階探討與解析。",
                icon: "activity",
                color: "text-red-400",
                glow: "shadow-red-500/40",
                borderHover: "hover:border-red-400/50",
                url: "https://augustin0106.github.io/mysite/earthquake"
            },
            {
                id: 7,
                title: "浮空投影模擬",
                desc: "討論 Hologram 成像位置與最高點。",
                icon: "box",
                color: "text-teal-400",
                glow: "shadow-teal-500/40",
                borderHover: "hover:border-teal-400/50",
                url: "https://augustin0106.github.io/mysite/hologram"
            },
            {
                id: 8,
                title: "光反射題型",
                desc: "常見雙反射魚尾題，角度如何改變？",
                icon: "sun",
                color: "text-orange-400",
                glow: "shadow-orange-500/40",
                borderHover: "hover:border-orange-400/50",
                url: "https://augustin0106.github.io/mysite/fishtail"
            },
            {
                id: 9,
                title: "資優聖誕特別企劃",
                desc: "溫馨的搶奪禮物大作戰，測試你的反應速度！",
                icon: "gift",
                color: "text-rose-400",
                glow: "shadow-rose-500/40",
                borderHover: "hover:border-rose-400/50",
                url: "https://augustin0106.github.io/mysite/christmasgame"
            },
            {
                id: 10,
                title: "讀書策略反思",
                desc: "用心理學原理引導你思考學習策略如何調整。",
                icon: "brain-circuit",
                color: "text-pink-400",
                glow: "shadow-pink-500/40",
                borderHover: "hover:border-pink-400/50",
                url: "https://augustin0106.github.io/mysite/reflection.html"
            },
            {
                id: 11,
                title: "解憂雜貨店",
                desc: "陪著你換位思考，看到冰山底下的脈絡。",
                icon: "heart-handshake",
                color: "text-emerald-400", // Adjusted from green to emerald for better Tailwind match
                glow: "shadow-emerald-500/40",
                borderHover: "hover:border-emerald-400/50",
                url: "https://augustin0106.github.io/mysite/conflict.html"
            }
        ];

        // ==========================================
        //  應用程式邏輯
        // ==========================================
        const homeView = document.getElementById('home-view');
        const gameView = document.getElementById('game-view');
        const cardGrid = document.getElementById('card-grid');
        const iframe = document.getElementById('simulation-frame');
        const loader = document.getElementById('loader');
        const gameTitleDisplay = document.getElementById('game-title-display');

        // 1. 初始化渲染卡片
        function initGrid() {
            cardGrid.innerHTML = '';
            
            // 加入動畫延遲索引
            simulations.forEach((sim, index) => {
                // 清理 URL (處理原本 Markdown 格式的問題)
                const cleanUrl = sim.url.replace(/\[|\]|\(http.*\)/g, '').trim() || sim.url.match(/\((.*?)\)/)?.[1] || sim.url;

                const card = document.createElement('div');
                
                // 動畫延遲 class
                card.style.animationDelay = `${index * 100}ms`;
                card.className = `glass-card group relative p-6 rounded-2xl cursor-pointer hover:-translate-y-2 fade-in flex flex-col h-full hover:shadow-[0_0_30px_-5px_rgba(0,0,0,0.3)] ${sim.borderHover} ${sim.glow.replace('shadow', 'hover:shadow')}`;
                
                card.onclick = () => openGame(sim.title, cleanUrl);

                card.innerHTML = `
                    <div class="mb-6 relative">
                        <!-- Icon Background Glow -->
                        <div class="absolute -inset-4 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-full blur-xl"></div>
                        
                        <!-- Icon Container -->
                        <div class="w-16 h-16 rounded-2xl bg-slate-800/50 border border-white/10 flex items-center justify-center group-hover:bg-white/10 transition-colors duration-300">
                            <i data-lucide="${sim.icon}" class="w-8 h-8 ${sim.color} transition-transform duration-300 group-hover:scale-110 group-hover:rotate-3"></i>
                        </div>
                    </div>
                    
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-white mb-2 group-hover:text-indigo-200 transition-colors">${sim.title}</h3>
                        <p class="text-slate-400 text-sm leading-relaxed">${sim.desc}</p>
                    </div>

                    <div class="mt-6 pt-6 border-t border-white/5 flex items-center justify-between">
                        <span class="text-xs font-medium text-slate-500 group-hover:text-slate-300 transition-colors">點擊開始</span>
                        <div class="w-8 h-8 rounded-full bg-white/5 flex items-center justify-center group-hover:bg-indigo-500 group-hover:text-white transition-all duration-300">
                            <i data-lucide="play" class="w-3 h-3 fill-current"></i>
                        </div>
                    </div>
                `;
                cardGrid.appendChild(card);
            });
            lucide.createIcons();
        }

        // 2. 開啟遊戲視圖
        function openGame(title, url) {
            // UI 狀態切換
            homeView.classList.add('hidden');
            gameView.classList.remove('hidden');
            gameView.classList.add('game-view-enter');
            
            // 設定標題
            gameTitleDisplay.textContent = title;
            
            // 重置 Iframe 狀態
            iframe.style.opacity = '0';
            loader.style.display = 'flex';
            
            // 載入 URL
            iframe.src = url;

            // 監聽載入完成 (簡單的延遲模擬，優化體驗)
            iframe.onload = () => {
                setTimeout(() => {
                    loader.style.display = 'none';
                    iframe.style.opacity = '1';
                }, 800);
            };
        }

        // 3. 關閉遊戲視圖
        function closeGame() {
            // 切換視圖
            gameView.classList.add('hidden');
            homeView.classList.remove('hidden');
            
            // 清除 Iframe 以停止聲音或運算
            iframe.src = 'about:blank';
            gameTitleDisplay.textContent = '';
        }

        // 啟動
        initGrid();

    </script>
</body>
</html>
